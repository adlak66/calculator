<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Python Console Calculator</title>

<style>
body {
    background-color: #0b0b0b;
    color: #e6e6e6;
    font-family: Consolas, "Courier New", monospace;
    margin: 0;
    padding: 20px;
}

#terminal {
    white-space: pre-wrap;
    line-height: 1.35;
    max-width: 950px;
    margin: auto;
}

input {
    background: transparent;
    border: none;
    color: inherit;
    font-family: inherit;
    font-size: 16px;
    outline: none;
    width: 260px;
}

.prompt {
    color: #8be9fd;
}
</style>
</head>

<body>
<div id="terminal"></div>

<script>
const terminal = document.getElementById("terminal");

const logo = `
 _____________________
|  _________________  |
| | Pythonista   0. | |  .----------------.  .----------------.  .----------------.  .----------------.
| |_________________| | | .--------------. || .--------------. || .--------------. || .--------------. |
|  ___ ___ ___   ___  | | |     ______   | || |      __      | || |   _____      | || |     ______   | |
| | 7 | 8 | 9 | | + | | | |   .' ___  |  | || |     /  \\     | || |  |_   _|     | || |   .' ___  |  | |
| |___|___|___| |___| | | |  / .'   \\_|  | || |    / /\\ \\    | || |    | |       | || |  / .'   \\_|  | |
| | 4 | 5 | 6 | | - | | | |  | |         | || |   / ____ \\   | || |    | |   _   | || |  | |         | |
| |___|___|___| |___| | | |  \\ \`.___.'\\  | || | _/ /    \\ \\_ | || |   _| |__/ |  | || |  \\ \`.___.'\\  | |
| | 1 | 2 | 3 | | x | | | |   \`._____.'  | || ||____|  |____|| || |  |________|  | || |   \`._____.'  | |
| |___|___|___| |___| | | |              | || |              | || |              | || |              | |
| | . | 0 | = | | / | | | '--------------' || '--------------' || '--------------' || '--------------' |
| |___|___|___| |___| |  '----------------'  '----------------'  '----------------'  '----------------'
|_____________________|
`;

let no1, no2, operation, ending;

/* ---------- Terminal helpers ---------- */

function print(text = "") {
    terminal.innerHTML += text + "\n";
    window.scrollTo(0, document.body.scrollHeight);
}

function clearTerminal() {
    terminal.innerHTML = "";
}

function input(promptText, callback) {
    const line = document.createElement("div");
    line.innerHTML = `<span class="prompt">${promptText}</span>`;
    const inp = document.createElement("input");
    line.appendChild(inp);
    terminal.appendChild(line);
    inp.focus();

    inp.addEventListener("keydown", e => {
        if (e.key === "Enter") {
            const value = inp.value.trim();
            terminal.removeChild(line);
            print(promptText + value);
            callback(value);
        }
    });
}

/* ---------- Calculator logic ---------- */

function calculate() {
    if (!["+","-","*","/"].includes(operation)) {
        print("You typed the wrong operation.");
        start();
        return;
    }

    if (operation === "/" && no2 === 0) {
        print("You cannot divide by zero.");
        start();
        return;
    }

    let result;
    switch (operation) {
        case "+": result = no1 + no2; break;
        case "-": result = no1 - no2; break;
        case "*": result = no1 * no2; break;
        case "/": result = no1 / no2; break;
    }

    ending = result;
    print(`${no1} ${operation} ${no2} = ${result}`);
    continuePrompt();
}

function continuePrompt() {
    input(
        `Type 'y' to continue calculating with ${ending}, or type 'n' to start a new calculation: `,
        answer => {
            if (answer === "y") {
                no1 = ending;
                pickOperation();
            } else if (answer === "n") {
                reset();
            } else {
                print("You typed the wrong inputs.");
                continuePrompt();
            }
        }
    );
}

function pickOperation() {
    print("+\n-\n*\n/");
    input("Pick an operation: ", op => {
        operation = op;
        input("What's the next number?: ", val => {
            no2 = parseFloat(val);
            if (isNaN(no2)) {
                print("Invalid number.");
                start();
            } else {
                calculate();
            }
        });
    });
}

function start() {
    input("What's the first number?: ", val => {
        no1 = parseFloat(val);
        if (isNaN(no1)) {
            print("Invalid number.");
            start();
        } else {
            pickOperation();
        }
    });
}

function reset() {
    no1 = no2 = operation = ending = null;
    clearTerminal();
    print(logo);
    start();
}

/* ---------- Boot ---------- */

print(logo);
start();
</script>
</body>
</html>
